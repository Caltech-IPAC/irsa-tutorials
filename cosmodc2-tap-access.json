{"version":2,"kind":"Notebook","sha256":"5cc07e896008b69c0d1c4730f06bafbb75c781276136c203a0fbe5749a4c7e2b","slug":"cosmodc2-tap-access","location":"/tutorials/cosmodc2/cosmoDC2_TAP_access.md","dependencies":[],"frontmatter":{"title":"Querying CosmoDC2 Mock v1 catalogs","kernelspec":{"name":"python3","display_name":"Python 3 (ipykernel)","language":"python"},"jupytext":{"formats":"md:myst","text_representation":{"extension":".md","format_name":"myst","format_version":"0.13","jupytext_version":"1.16.2"}},"content_includes_title":false,"authors":[{"id":"IRSA Scientists and Developers","name":"IRSA Scientists and Developers"}],"github":"https://github.com/Caltech-IPAC/irsa-tutorials/","subject":"IRSA Tutorials","keywords":["astronomy"],"settings":{"output_matplotlib_strings":"remove"},"numbering":{"title":{"offset":2}},"source_url":"https://github.com/Caltech-IPAC/irsa-tutorials//blob/main/tutorials/cosmodc2/cosmoDC2_TAP_access.md","edit_url":"https://github.com/Caltech-IPAC/irsa-tutorials//edit/main/tutorials/cosmodc2/cosmoDC2_TAP_access.md","exports":[{"format":"md","filename":"cosmoDC2_TAP_access.md","url":"/irsa-tutorials/build/cosmoDC2_TAP_access-6e71cb220175bd1af2c1b119fea1d17a.md"}]},"mdast":{"type":"root","children":[{"type":"block","children":[{"type":"paragraph","position":{"start":{"line":21,"column":1},"end":{"line":21,"column":1}},"children":[{"type":"text","value":"This tutorial demonstrates how to access the CosmoDC2 Mock V1 catalogs. More information about these catalogs can be found here: ","position":{"start":{"line":21,"column":1},"end":{"line":21,"column":1}},"key":"avkMUjnmCR"},{"type":"link","url":"https://irsa.ipac.caltech.edu/Missions/cosmodc2.html","position":{"start":{"line":21,"column":1},"end":{"line":21,"column":1}},"children":[{"type":"text","value":"https://​irsa​.ipac​.caltech​.edu​/Missions​/cosmodc2​.html","position":{"start":{"line":21,"column":1},"end":{"line":21,"column":1}},"key":"xnpRPDPWO8"}],"urlSource":"https://irsa.ipac.caltech.edu/Missions/cosmodc2.html","key":"xQO7lkzy7O"}],"key":"CwJJO1ld90"},{"type":"paragraph","position":{"start":{"line":23,"column":1},"end":{"line":23,"column":1}},"children":[{"type":"text","value":"These catalogs can be accessed through IRSA’s Virtual Ovservatory Table Access Protocol (TAP) service. See ","position":{"start":{"line":23,"column":1},"end":{"line":23,"column":1}},"key":"k8XTFhc6zN"},{"type":"link","url":"https://www.ivoa.net/documents/TAP/","position":{"start":{"line":23,"column":1},"end":{"line":23,"column":1}},"children":[{"type":"text","value":"https://​www​.ivoa​.net​/documents​/TAP/","position":{"start":{"line":23,"column":1},"end":{"line":23,"column":1}},"key":"OYPagY4ZIj"}],"urlSource":"https://www.ivoa.net/documents/TAP/","key":"fZx3WkDCr0"},{"type":"text","value":" for details on the protocol. This service can be accessed through Python using the PyVO library.","position":{"start":{"line":23,"column":1},"end":{"line":23,"column":1}},"key":"L3of9pliuA"}],"key":"tuJuCn3tNh"}],"key":"CMtSaw9hqS"},{"type":"block","kind":"notebook-code","children":[{"type":"code","lang":"python","executable":true,"value":"# Uncomment the next line to install dependencies if needed.\n# !pip install numpy matplotlib pyvo","key":"cHMFUzLet5"},{"type":"output","id":"Hw7BcP_P9WDF_r6H1Iw7U","data":[],"key":"wZAq8MhShE"}],"key":"pTpAkzulz2"},{"type":"block","kind":"notebook-code","children":[{"type":"code","lang":"python","executable":true,"value":"import pyvo as vo","key":"ZpNYZdTui0"},{"type":"output","id":"tu2iJAUkT1R_51p7k4I5N","data":[],"key":"fkGV5DEiwE"}],"key":"TAvvfTvFPI"},{"type":"block","kind":"notebook-code","children":[{"type":"code","lang":"python","executable":true,"value":"service = vo.dal.TAPService(\"https://irsa.ipac.caltech.edu/TAP\")","key":"gTVbvEWbBe"},{"type":"output","id":"HvHLVRQ9k9OofWaS_Cj8v","data":[],"key":"gBElph5bSD"}],"key":"n5uC0tdqRs"},{"type":"block","children":[{"type":"heading","depth":2,"position":{"start":{"line":38,"column":1},"end":{"line":38,"column":1}},"children":[{"type":"text","value":"List the available DC2 tables","position":{"start":{"line":38,"column":1},"end":{"line":38,"column":1}},"key":"MZ5cMHRjG9"}],"identifier":"list-the-available-dc2-tables","label":"List the available DC2 tables","html_id":"list-the-available-dc2-tables","implicit":true,"key":"uI5MrmBZr8"}],"key":"Co3iC6mJ48"},{"type":"block","kind":"notebook-code","children":[{"type":"code","lang":"python","executable":true,"value":"tables = service.tables\nfor tablename in tables.keys():\n    if not \"tap_schema\" in tablename:\n        if \"dc2\" in tablename:\n            tables[tablename].describe()","key":"R59LCi4AwB"},{"type":"output","id":"-MHU7Y0ZyZy3UyQIg3wOY","data":[{"output_type":"stream","name":"stdout","text":"cosmodc2mockv1\n    CosmoDC2MockV1 Catalog - unabridged, spatially partitioned\n\n"},{"output_type":"stream","name":"stdout","text":"cosmodc2mockv1_heavy\n    CosmoDC2MockV1 Catalog - stellar mass > 10^7 Msun\n\n"},{"output_type":"stream","name":"stdout","text":"cosmodc2mockv1_new\n    CosmoDC2MockV1 Catalog - unabridged\n\n"}],"key":"aNJ6PZtluK"}],"key":"OHxnTzKg0v"},{"type":"block","children":[{"type":"heading","depth":2,"position":{"start":{"line":48,"column":1},"end":{"line":48,"column":1}},"children":[{"type":"text","value":"Choose the DC2 catalog you want to work with.","position":{"start":{"line":48,"column":1},"end":{"line":48,"column":1}},"key":"nlzYNJ2GAM"}],"identifier":"choose-the-dc2-catalog-you-want-to-work-with","label":"Choose the DC2 catalog you want to work with.","html_id":"choose-the-dc2-catalog-you-want-to-work-with","implicit":true,"key":"NGmPIL299e"},{"type":"paragraph","position":{"start":{"line":50,"column":1},"end":{"line":50,"column":1}},"children":[{"type":"text","value":"IRSA currently offers 3 versions of the DC2 catalog.","position":{"start":{"line":50,"column":1},"end":{"line":50,"column":1}},"key":"Ona1CV9mXF"}],"key":"gPlRECe5U7"},{"type":"list","ordered":false,"spread":false,"position":{"start":{"line":52,"column":1},"end":{"line":57,"column":1}},"children":[{"type":"listItem","spread":true,"position":{"start":{"line":52,"column":1},"end":{"line":53,"column":1}},"children":[{"type":"paragraph","position":{"start":{"line":52,"column":1},"end":{"line":52,"column":1}},"children":[{"type":"inlineCode","value":"cosmodc2mockv1_new","position":{"start":{"line":52,"column":1},"end":{"line":52,"column":1}},"key":"yKzanPMfDc"},{"type":"text","value":" has been optimized to make searches with constraints on stellar mass and redshift fast.","position":{"start":{"line":52,"column":1},"end":{"line":52,"column":1}},"key":"y4Aiz2V8Ao"}],"key":"Q6yT2NAGe1"}],"key":"nQCw0EKbRE"},{"type":"listItem","spread":true,"position":{"start":{"line":54,"column":1},"end":{"line":55,"column":1}},"children":[{"type":"paragraph","position":{"start":{"line":54,"column":1},"end":{"line":54,"column":1}},"children":[{"type":"inlineCode","value":"cosmodc2mockv1","position":{"start":{"line":54,"column":1},"end":{"line":54,"column":1}},"key":"nXEj6YQcTZ"},{"type":"text","value":" has been optimized to make searches with spatial constraints fast.","position":{"start":{"line":54,"column":1},"end":{"line":54,"column":1}},"key":"jMP1m6sObp"}],"key":"AALPGd4Fop"}],"key":"BhPURJrBPv"},{"type":"listItem","spread":true,"position":{"start":{"line":56,"column":1},"end":{"line":57,"column":1}},"children":[{"type":"paragraph","position":{"start":{"line":56,"column":1},"end":{"line":56,"column":1}},"children":[{"type":"inlineCode","value":"cosmodc2mockv1_heavy","position":{"start":{"line":56,"column":1},"end":{"line":56,"column":1}},"key":"ddEVgjOIHv"},{"type":"text","value":" is the same as ","position":{"start":{"line":56,"column":1},"end":{"line":56,"column":1}},"key":"sVYVPZm0ur"},{"type":"inlineCode","value":"cosmodc2mockv1_new","position":{"start":{"line":56,"column":1},"end":{"line":56,"column":1}},"key":"RhATLfgHt8"},{"type":"text","value":", except that it does not contain galaxies with stellar masses <= 10^7 solar masses.","position":{"start":{"line":56,"column":1},"end":{"line":56,"column":1}},"key":"LkgKTQXRV4"}],"key":"Vyb144y1Cz"}],"key":"FsxHmQ6JXx"}],"key":"tpsH2PNh59"},{"type":"paragraph","position":{"start":{"line":58,"column":1},"end":{"line":58,"column":1}},"children":[{"type":"text","value":"If you are new to the DC2 catalog, we recommend that you start with ","position":{"start":{"line":58,"column":1},"end":{"line":58,"column":1}},"key":"xUfZmjpFHP"},{"type":"inlineCode","value":"cosmodc2mockv1_heavy","position":{"start":{"line":58,"column":1},"end":{"line":58,"column":1}},"key":"DwDwKPy3WM"}],"key":"GIZahPtt8i"}],"key":"TXwGHADMuA"},{"type":"block","kind":"notebook-code","children":[{"type":"code","lang":"python","executable":true,"value":"# Choose the abridged table to start with.\n# Queries should be faster on smaller tables.\n\ntablename = 'cosmodc2mockv1_heavy'","key":"hNslhyrojP"},{"type":"output","id":"oeUyu759BUhHwc1-ZsC-T","data":[],"key":"eVg5GqWvCe"}],"key":"jUwcFe5djf"},{"type":"block","children":[{"type":"heading","depth":2,"position":{"start":{"line":67,"column":1},"end":{"line":67,"column":1}},"children":[{"type":"text","value":"How many rows are in the chosen table?","position":{"start":{"line":67,"column":1},"end":{"line":67,"column":1}},"key":"OrpxOuSCS2"}],"identifier":"how-many-rows-are-in-the-chosen-table","label":"How many rows are in the chosen table?","html_id":"how-many-rows-are-in-the-chosen-table","implicit":true,"key":"tpTiYCEfPs"},{"type":"paragraph","position":{"start":{"line":69,"column":1},"end":{"line":69,"column":1}},"children":[{"type":"text","value":"With TAP, you can query catalogs with constraints specified in IVOA Astronomical Data Query Language (ADQL; ","position":{"start":{"line":69,"column":1},"end":{"line":69,"column":1}},"key":"JIzkHA6HyU"},{"type":"link","url":"https://www.ivoa.net/documents/latest/ADQL.html","position":{"start":{"line":69,"column":1},"end":{"line":69,"column":1}},"children":[{"type":"text","value":"https://​www​.ivoa​.net​/documents​/latest​/ADQL​.html","position":{"start":{"line":69,"column":1},"end":{"line":69,"column":1}},"key":"wOU2A34xrk"}],"urlSource":"https://www.ivoa.net/documents/latest/ADQL.html","key":"F79NiE9MDQ"},{"type":"text","value":"), which is based on SQL.","position":{"start":{"line":69,"column":1},"end":{"line":69,"column":1}},"key":"opc1wiPejg"}],"key":"PCmXt5k2Ls"}],"key":"kz8sCzgBBp"},{"type":"block","kind":"notebook-code","children":[{"type":"code","lang":"python","executable":true,"value":"# For example, this snippet of ADQL counts the number of elements in\n# the redshift column of the table we chose.\nadql = f\"SELECT count(redshift) FROM {tablename}\"\nadql","key":"GDsFTk5kEI"},{"type":"output","id":"t2su_SJnpIYoJ7QqWiqk9","data":[{"output_type":"execute_result","execution_count":6,"metadata":{},"data":{"text/plain":{"content":"'SELECT count(redshift) FROM cosmodc2mockv1_heavy'","content_type":"text/plain"}}}],"key":"DwmJTxNLs5"}],"key":"IdBiDVgxTM"},{"type":"block","children":[{"type":"paragraph","position":{"start":{"line":78,"column":1},"end":{"line":78,"column":1}},"children":[{"type":"text","value":"In order to use TAP with this ADQL string using pyvo, you can do the following:","position":{"start":{"line":78,"column":1},"end":{"line":78,"column":1}},"key":"t4z85Ij7cH"}],"key":"b9gNyAuCsz"}],"key":"e45X2OxJRM"},{"type":"block","kind":"notebook-code","children":[{"type":"code","lang":"python","executable":true,"value":"# Uncomment the next line to run the query. Beware that it can take awhile.\n# service.run_async(adql)","key":"XJCOzKlHG8"},{"type":"output","id":"VX2FqYgF2znQtd-BOHDbD","data":[],"key":"N1ph6Z3ELN"}],"key":"YKYWzcpYnk"},{"type":"block","children":[{"type":"paragraph","position":{"start":{"line":85,"column":1},"end":{"line":87,"column":1}},"children":[{"type":"text","value":"The above query shows that there are 597,488,849 redshifts in this table.\nRunning ","position":{"start":{"line":85,"column":1},"end":{"line":85,"column":1}},"key":"a8FkFEVsWE"},{"type":"inlineCode","value":"count","position":{"start":{"line":85,"column":1},"end":{"line":85,"column":1}},"key":"XLW2ySCiEC"},{"type":"text","value":" on an entire table is an expensive operation, therefore we ran it asynchronously to avoid any potential timeout issues.\nTo learn more about synchronous versus asynchronous PyVO queries please read the ","position":{"start":{"line":85,"column":1},"end":{"line":85,"column":1}},"key":"YM0WTsClHb"},{"type":"link","url":"https://pyvo.readthedocs.io/en/latest/dal/index.html#synchronous-vs-asynchronous-query","position":{"start":{"line":85,"column":1},"end":{"line":85,"column":1}},"children":[{"type":"text","value":"relevant PyVO documentation","position":{"start":{"line":85,"column":1},"end":{"line":85,"column":1}},"key":"CAH7Sp2uCZ"}],"urlSource":"https://pyvo.readthedocs.io/en/latest/dal/index.html#synchronous-vs-asynchronous-query","key":"ts9xcoKsFO"},{"type":"text","value":".","position":{"start":{"line":85,"column":1},"end":{"line":85,"column":1}},"key":"wlyDjQtEUT"}],"key":"PLn8leOfe9"}],"key":"Ie3sO1yCMt"},{"type":"block","position":{"start":{"line":89,"column":1},"end":{"line":89,"column":1}},"children":[{"type":"heading","depth":2,"position":{"start":{"line":91,"column":1},"end":{"line":91,"column":1}},"children":[{"type":"text","value":"What is the default maximum number of rows returned by the service?","position":{"start":{"line":91,"column":1},"end":{"line":91,"column":1}},"key":"WVuCvShszg"}],"identifier":"what-is-the-default-maximum-number-of-rows-returned-by-the-service","label":"What is the default maximum number of rows returned by the service?","html_id":"what-is-the-default-maximum-number-of-rows-returned-by-the-service","implicit":true,"key":"IswZMfD5G1"},{"type":"paragraph","position":{"start":{"line":93,"column":1},"end":{"line":93,"column":1}},"children":[{"type":"text","value":"This service will return a maximum of 2 billion rows by default.","position":{"start":{"line":93,"column":1},"end":{"line":93,"column":1}},"key":"Qom2lM47ZW"}],"key":"BD3G2Xefdh"}],"key":"SlbnvmZQsx"},{"type":"block","kind":"notebook-code","children":[{"type":"code","lang":"python","executable":true,"value":"service.maxrec","key":"ZzkxBVA4Po"},{"type":"output","id":"MV0JP_5DxBxUbZ6HGHciL","data":[{"output_type":"execute_result","execution_count":8,"metadata":{},"data":{"text/plain":{"content":"2000000000","content_type":"text/plain"}}}],"key":"OaiYq9cawb"}],"key":"JEONibrrjn"},{"type":"block","children":[{"type":"paragraph","position":{"start":{"line":99,"column":1},"end":{"line":99,"column":1}},"children":[{"type":"text","value":"This default maximum can be changed, and there is no hard upper limit to what it can be changed to.","position":{"start":{"line":99,"column":1},"end":{"line":99,"column":1}},"key":"ss72Uik5rs"}],"key":"H0GfJGC2dX"}],"key":"Kk7u6O0NJT"},{"type":"block","kind":"notebook-code","children":[{"type":"code","lang":"python","executable":true,"value":"print(service.hardlimit)","key":"PISs7JsFVR"},{"type":"output","id":"lc99MG7ITTS0-ClrPOsL_","data":[{"output_type":"stream","name":"stdout","text":"None\n"}],"key":"fwJjyI5Fso"}],"key":"reMArbes7P"},{"type":"block","children":[{"type":"heading","depth":2,"position":{"start":{"line":105,"column":1},"end":{"line":105,"column":1}},"children":[{"type":"text","value":"List the columns in the chosen table","position":{"start":{"line":105,"column":1},"end":{"line":105,"column":1}},"key":"SJv1AfpzX5"}],"identifier":"list-the-columns-in-the-chosen-table","label":"List the columns in the chosen table","html_id":"list-the-columns-in-the-chosen-table","implicit":true,"key":"xzskLMV3y3"},{"type":"paragraph","position":{"start":{"line":107,"column":1},"end":{"line":107,"column":1}},"children":[{"type":"text","value":"This table contains 301 columns.","position":{"start":{"line":107,"column":1},"end":{"line":107,"column":1}},"key":"RRR0DelHvl"}],"key":"sPCjcHyFwf"}],"key":"GAulYn62Qo"},{"type":"block","kind":"notebook-code","children":[{"type":"code","lang":"python","executable":true,"value":"columns = tables[tablename].columns\nprint(len(columns))","key":"fdIR3hxkjA"},{"type":"output","id":"f5g2q8AmS2HQ88PLw8UW6","data":[{"output_type":"stream","name":"stdout","text":"301\n"}],"key":"wM7reF4SA1"}],"key":"xLGcVqqx3o"},{"type":"block","children":[{"type":"paragraph","position":{"start":{"line":114,"column":1},"end":{"line":114,"column":1}},"children":[{"type":"text","value":"Let’s learn a bit more about them.","position":{"start":{"line":114,"column":1},"end":{"line":114,"column":1}},"key":"sOvrXPSmOZ"}],"key":"fS9kMALjxC"}],"key":"AEEsaU60QY"},{"type":"block","kind":"notebook-code","children":[{"type":"code","lang":"python","executable":true,"value":"for col in columns:\n    print(f'{f\"{col.name}\":30s}  {col.description}')","key":"ZkadFXlWqT"},{"type":"output","id":"kyys9eTcCxBzrdiYt84BD","data":[{"output_type":"stream","name":"stdout","text":"ra                              Right ascension, lensed\ndec  ...","hash":"a0f1bf6c4a6724b463b6c68c215d37a6","path":"/irsa-tutorials/build/a0f1bf6c4a6724b463b6c68c215d37a6.txt"}],"key":"R5eaLIGMe5"}],"key":"K6tBXVlVdR"},{"type":"block","children":[{"type":"heading","depth":2,"position":{"start":{"line":121,"column":1},"end":{"line":121,"column":1}},"children":[{"type":"text","value":"Create a histogram of redshifts","position":{"start":{"line":121,"column":1},"end":{"line":121,"column":1}},"key":"uTsRQhP8tx"}],"identifier":"create-a-histogram-of-redshifts","label":"Create a histogram of redshifts","html_id":"create-a-histogram-of-redshifts","implicit":true,"key":"MpPdL88hMM"},{"type":"paragraph","position":{"start":{"line":123,"column":1},"end":{"line":123,"column":1}},"children":[{"type":"text","value":"Let’s figure out what redshift range these galaxies cover. Since we found out above that it’s a large catalog, we can start with a spatial search over a small area of 0.1 deg. The ADQL that is needed for the spatial constraint is:","position":{"start":{"line":123,"column":1},"end":{"line":123,"column":1}},"key":"ZtmJ3Aha0j"}],"key":"F6iP4bUvGT"}],"key":"zR7fonZIeR"},{"type":"block","kind":"notebook-code","children":[{"type":"code","lang":"python","executable":true,"value":"adql = f\"SELECT redshift FROM {tablename} WHERE CONTAINS(POINT('ICRS', RAMean, DecMean), CIRCLE('ICRS',54.218205903,-37.497959343,.1))=1\"\nadql","key":"XtZcixtWG4"},{"type":"output","id":"9ief56-8X-bgL7flX9hCN","data":[{"output_type":"execute_result","execution_count":12,"metadata":{},"data":{"text/plain":{"content":"\"SELECT redshift FROM cosmodc2mockv1_heavy WHERE CONTAINS(POINT('ICRS', RAMean, DecMean), CIRCLE('ICRS',54.218205903,-37.497959343,.1))=1\"","content_type":"text/plain"}}}],"key":"huRGyNhYSC"}],"key":"jXPDe5KlY8"},{"type":"block","children":[{"type":"paragraph","position":{"start":{"line":130,"column":1},"end":{"line":130,"column":1}},"children":[{"type":"text","value":"Now we can use the previously-defined service to execute the query with the spatial contraint.","position":{"start":{"line":130,"column":1},"end":{"line":130,"column":1}},"key":"BeMnsJBFYF"}],"key":"gTwZVlEQJf"}],"key":"vKqE4AcWcn"},{"type":"block","kind":"notebook-code","children":[{"type":"code","lang":"python","executable":true,"value":"cone_results = service.run_sync(adql)","key":"nLg0GrNH9z"},{"type":"output","id":"8Ijw7Ue6JCUCJeHjye3nz","data":[],"key":"mVhHXhwouY"}],"key":"rSM4P3WTLG"},{"type":"block","children":[],"key":"Ge6YCZ7vrv"},{"type":"block","kind":"notebook-code","children":[{"type":"code","lang":"python","executable":true,"value":"# Plot a histogram\nimport numpy as np\nimport matplotlib.mlab as mlab\nimport matplotlib.pyplot as plt\n\nnum_bins = 20\n# the histogram of the data\nn, bins, patches = plt.hist(cone_results['redshift'], num_bins,\n                            facecolor='blue', alpha = 0.5)\nplt.xlabel('Redshift')\nplt.ylabel('Number')\nplt.title('Redshift Histogram CosmoDC2 Mock Catalog V1 abridged')","key":"xt1lRNMXXm"},{"type":"output","id":"adt_Kxx_lBRYL6HaHq40K","data":[{"output_type":"display_data","metadata":{},"data":{"text/plain":{"content":"<Figure size 640x480 with 1 Axes>","content_type":"text/plain"},"image/png":{"content_type":"image/png","hash":"e4b205b7682b6f8e8d408f57a313d345","path":"/irsa-tutorials/build/e4b205b7682b6f8e8d408f57a313d345.png"}}}],"key":"t5SZ6G8BIX"}],"key":"Q5sewzhWJU"},{"type":"block","children":[{"type":"paragraph","position":{"start":{"line":151,"column":1},"end":{"line":151,"column":1}},"children":[{"type":"text","value":"We can easily see form this plot that the simulated galaxies go out to z = 3.","position":{"start":{"line":151,"column":1},"end":{"line":151,"column":1}},"key":"ijK9trWf8M"}],"key":"AnZ6iSNZdf"}],"key":"DmBpkd74VA"},{"type":"block","position":{"start":{"line":153,"column":1},"end":{"line":153,"column":1}},"children":[{"type":"heading","depth":2,"position":{"start":{"line":155,"column":1},"end":{"line":155,"column":1}},"children":[{"type":"text","value":"Visualize galaxy colors at z ~ 0.5","position":{"start":{"line":155,"column":1},"end":{"line":155,"column":1}},"key":"OVYTS0i49t"}],"identifier":"visualize-galaxy-colors-at-z-0-5","label":"Visualize galaxy colors at z ~ 0.5","html_id":"visualize-galaxy-colors-at-z-0-5","implicit":true,"key":"SNmHVUhwaB"},{"type":"paragraph","position":{"start":{"line":157,"column":1},"end":{"line":157,"column":1}},"children":[{"type":"text","value":"Now let’s visualize the galaxy main sequence at z = 2.0. First, we’ll do a narrow redshift cut with no spatial constraint.","position":{"start":{"line":157,"column":1},"end":{"line":157,"column":1}},"key":"aBW2OQmITN"}],"key":"aNSPpToqKu"},{"type":"paragraph","position":{"start":{"line":159,"column":1},"end":{"line":159,"column":1}},"children":[{"type":"text","value":"Let’s do it as an asynchronous search since this might take awhile, too.","position":{"start":{"line":159,"column":1},"end":{"line":159,"column":1}},"key":"Wbg1kNj8mg"}],"key":"hXpqVB6p7t"}],"key":"G7jerfYvsW"},{"type":"block","kind":"notebook-code","children":[{"type":"code","lang":"python","executable":true,"value":"service = vo.dal.TAPService(\"https://irsa.ipac.caltech.edu/TAP\")\nadql = f\"SELECT Mag_true_r_sdss_z0, Mag_true_g_sdss_z0, redshift FROM {tablename} WHERE redshift > 0.5 and redshift < 0.54\"\nresults = service.run_async(adql)","key":"eP199lrspT"},{"type":"output","id":"tKkl8NMdv0AiXnuHD5eC3","data":[],"key":"iAWfgTufl2"}],"key":"dRMnFFobpt"},{"type":"block","children":[],"key":"oKcaqqdISn"},{"type":"block","kind":"notebook-code","children":[{"type":"code","lang":"python","executable":true,"value":"len(results['mag_true_r_sdss_z0'])","key":"UjEhvpYiU0"},{"type":"output","id":"3lJIsZz_vdxegTtBvVQXW","data":[{"output_type":"execute_result","execution_count":16,"metadata":{},"data":{"text/plain":{"content":"3833489","content_type":"text/plain"}}}],"key":"uI6p3J1lrq"}],"key":"HgpztTx5QT"},{"type":"block","children":[],"key":"gpJl4lmw3g"},{"type":"block","kind":"notebook-code","children":[{"type":"code","lang":"python","executable":true,"value":"# Since this results in almost 4 million galaxies,\n# we will construct a 2D histogram rather than a scatter plot.\nplt.hist2d(results['mag_true_r_sdss_z0'], results['mag_true_g_sdss_z0']-results['mag_true_r_sdss_z0'],\n           bins=200, cmap='plasma', cmax=500)\n\n# Plot a colorbar with label.\ncb = plt.colorbar()\ncb.set_label('Number')\n\n# Add title and labels to plot.\nplt.xlabel('SDSS Mag r')\nplt.ylabel('SDSS rest-frame g-r color')\n\n# Show the plot.\nplt.show()","key":"EtQcgXkD0h"},{"type":"output","id":"IuOTzUddXuEChDX-xmlUn","data":[{"output_type":"display_data","metadata":{},"data":{"text/plain":{"content":"<Figure size 640x480 with 2 Axes>","content_type":"text/plain"},"image/png":{"content_type":"image/png","hash":"202e62bec334e094bb4f59d777524879","path":"/irsa-tutorials/build/202e62bec334e094bb4f59d777524879.png"}}}],"key":"FeWhO1ktlY"}],"key":"ELu6tFweHB"},{"type":"block","children":[{"type":"thematicBreak","position":{"start":{"line":188,"column":1},"end":{"line":188,"column":1}},"key":"PkcM5LpALl"},{"type":"heading","depth":2,"position":{"start":{"line":190,"column":1},"end":{"line":190,"column":1}},"children":[{"type":"text","value":"About this notebook","position":{"start":{"line":190,"column":1},"end":{"line":190,"column":1}},"key":"fIv2Fm0YMY"}],"identifier":"about-this-notebook","label":"About this notebook","html_id":"about-this-notebook","implicit":true,"key":"uA0wil9Mw7"},{"type":"paragraph","position":{"start":{"line":192,"column":1},"end":{"line":192,"column":1}},"children":[{"type":"strong","position":{"start":{"line":192,"column":1},"end":{"line":192,"column":1}},"children":[{"type":"text","value":"Author:","position":{"start":{"line":192,"column":1},"end":{"line":192,"column":1}},"key":"V4gf2Lk7hT"}],"key":"k8OY3SoFyt"},{"type":"text","value":" Vandana Desai (IRSA Science Lead)","position":{"start":{"line":192,"column":1},"end":{"line":192,"column":1}},"key":"tj8uQwExwx"}],"key":"nxT0fDyvmX"},{"type":"paragraph","position":{"start":{"line":194,"column":1},"end":{"line":194,"column":1}},"children":[{"type":"strong","position":{"start":{"line":194,"column":1},"end":{"line":194,"column":1}},"children":[{"type":"text","value":"Updated:","position":{"start":{"line":194,"column":1},"end":{"line":194,"column":1}},"key":"fPwEWqHZyC"}],"key":"Cbti9f2Kov"},{"type":"text","value":" 2024-07-24","position":{"start":{"line":194,"column":1},"end":{"line":194,"column":1}},"key":"WXcp3lIVkx"}],"key":"ZG6csaVmNE"},{"type":"paragraph","position":{"start":{"line":196,"column":1},"end":{"line":196,"column":1}},"children":[{"type":"strong","position":{"start":{"line":196,"column":1},"end":{"line":196,"column":1}},"children":[{"type":"text","value":"Contact:","position":{"start":{"line":196,"column":1},"end":{"line":196,"column":1}},"key":"raWPubFWSS"}],"key":"I8iOFd8d8N"},{"type":"text","value":" ","position":{"start":{"line":196,"column":1},"end":{"line":196,"column":1}},"key":"wbmoEvVk78"},{"type":"link","url":"https://irsa.ipac.caltech.edu/docs/help_desk.html","position":{"start":{"line":196,"column":1},"end":{"line":196,"column":1}},"children":[{"type":"text","value":"the IRSA Helpdesk","position":{"start":{"line":196,"column":1},"end":{"line":196,"column":1}},"key":"O6zQLRoft5"}],"urlSource":"https://irsa.ipac.caltech.edu/docs/help_desk.html","key":"FcWFsDDUQk"},{"type":"text","value":" with questions or reporting problems.","position":{"start":{"line":196,"column":1},"end":{"line":196,"column":1}},"key":"vnyqJFIcfY"}],"key":"sHpl3KtohF"}],"key":"ZZkLqj8jTH"}],"key":"ud8j5TiGCs"},"references":{"cite":{"order":[],"data":{}}},"footer":{"navigation":{"prev":{"title":"Analyzing cloud-hosted simulated Roman Time Domain Survey images","url":"/openuniverse2024-roman-simulated-timedomainsurvey","group":"OpenUniverse 2024"},"next":{"title":"IRSA cloud access introduction","url":"/cloud-access-intro","group":"Special Topics"}}},"domain":"http://localhost:3000"}